<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.5.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.2/fetch.min.js" type="text/javascript"></script>
</head>
<body>
<script src="js/hud.js"></script>
<script type="text/javascript">
        var vars = {
            heading: 240,
            dewPoint: -3.5,
            temperature: 25.8,
            visibility: 3000,
            windDirection: 118,
            windSpeed: 18,
            windGust: 24
        };

        var width = 800;
        var height = 600;
    //
    //    var s = document.querySelector("#hud");
    //    s.components.material.material.map = new THREE.Texture(createHUD(data));

    AFRAME.registerComponent('hud', {
        schema: {
            width: {type: 'number', default: 1},
            height: {type: 'number', default: 1}
        },
        /**
         * Initial creation and setting of the mesh.
         */
        init: function () {
            console.log("stuff");
            var data = this.data;
            var el = this.el;
            // Create geometry.
            this.geometry = new THREE.PlaneBufferGeometry(data.width, data.height);
            // Create material.
            var texture = new THREE.Texture(createHUD(vars));
            texture.needsUpdate = true;

            this.material = new THREE.MeshStandardMaterial({map: texture, transparent:true});
            // Create mesh.
            this.mesh = new THREE.Mesh(this.geometry, this.material);
            // Set mesh on entity.
            el.setObject3D('mesh', this.mesh);
        }
    });

</script>

    <a-scene id="scene">
        <a-camera reverse-mouse-drag="true" >
            <a-entity hud="width:0.8; height 0.6;" position="0 0 -1"></a-entity>
        </a-camera>


        <a-box color="red" position="0 2 -5" rotation="0 45 45" scale="2 2 2"></a-box>
    </a-scene>

</body>
</html>