<html>
<head>
    <title>MOC Photosphere Catalogue</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aframe/0.5.0/aframe.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.2/fetch.min.js" type="text/javascript"></script>

    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/pure-min.css"
          integrity="sha384-UQiGfs9ICog+LwheBSRCt1o5cbyKIHbwjWscjemyBMT9YCUMZffs6UqUTd0hObXD" crossorigin="anonymous">

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/grids-responsive-old-ie-min.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="https://unpkg.com/purecss@0.6.2/build/grids-responsive-min.css">
    <!--<![endif]-->

    <!--[if lte IE 8]>
    <link rel="stylesheet" href="/css/style-old-ie.css">
    <![endif]-->
    <!--[if gt IE 8]><!-->
    <link rel="stylesheet" href="/css/style.css">
    <!--<![endif]-->

</head>
<body>

<div id="layout" class="pure-g">

    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <h1 class="brand-title">MOC 360&deg; Catalogue</h1>
            <h2 class="brand-tagline">view 360&deg; photosphere observations</h2>

            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="pure-button" href="index.html">Catalogue</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" href="upload.html">Upload</a>
                    </li>
                </ul>
            </nav>

        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            <div id="search" class="posts">
                <form class="pure-form pure-form-aligned" action="." method="get">
                    <div class="pure-control-group">
                        <input name="tag" type="text" class="pure-input-rounded pure-u-1" placeholder="Search by tag">
                    </div>
                </form>
                <script id="tag_cloud" type="text/x-dot-template">
                    <p>
                    {{~it.tags :value:index}}
                    <a class="post-category" href="?tag={{=value}}">{{=value}}</a>
                    {{~}}
                    </p>
                </script>
            </div>

            <!-- A wrapper for all the blog posts -->
            <div id="results" class="posts">

                <a name="results"></a>

                <script id="subheading" type="text/x-dot-template">
                    <h1 class="content-subhead">{{=it.text}}</h1>
                </script>

                <script id="photosphere_result" type="text/x-dot-template">
                    <div class="post">
                        <p class="post-meta">
                            Observed {{=it.date}} tagged as:
                            {{~it.tags :value:index}}
                            <a class="post-category" href="?tag={{=value}}">{{=value}}</a>
                            {{~}}
                        </p>
                        <br/>
                        <a-scene class="pure-u-1" embedded>
                            <a-camera reverse-mouse-drag="true" ></a-camera>
                            <a-assets>
                                <img id="img_{{=it.id}}" crossorigin="" src="{{=it.photosphere_url}}">
                            </a-assets>
                            <a-sky src="#img_{{=it.id}}"></a-sky>
                        </a-scene>
                    </div>
                </script>

                <script id="tag_result" type="text/x-dot-template">
                    <div class="post">
                        <a href="?id={{=it.id}}" title="View"><img class="post-avatar" crossorigin="" src="{{=it.photosphere_avatar_url}}"></a>
                        <p class="post-meta">
                            Observed {{=it.date}} tagged as:
                            {{~it.tags :value:index}}
                            <a class="post-category" href="?tag={{=value}}">{{=value}}</a>
                            {{~}}
                        </p>
                        <br />
                    </div>
                </script>


            </div>

        </div>
    </div>
</div>

<script src="js/doT.min.js"></script>
<script src="js/index.js"></script>

</body>
</html>
